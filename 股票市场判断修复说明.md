# è‚¡ç¥¨å¸‚åœºåˆ¤æ–­ä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

åŸæ¥çš„ä»£ç åœ¨åˆ¤æ–­è‚¡ç¥¨å¸‚åœºæ—¶å­˜åœ¨é”™è¯¯ï¼š
- åŸä»£ç ï¼š`code.startsWith('000') ? '0' : '1'`
- é—®é¢˜ï¼šåªåˆ¤æ–­äº†000å¼€å¤´çš„è‚¡ç¥¨ä¸ºæ·±åœ³å¸‚åœºï¼Œä½†å®é™…ä¸Š0å¼€å¤´ã€3å¼€å¤´ã€8å¼€å¤´çš„éƒ½æ˜¯æ·±åœ³å¸‚åœº

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤å¸‚åœºåˆ¤æ–­é€»è¾‘

**ä¿®å¤å‰ï¼š**
```javascript
const secid = code.startsWith('000') ? `0.${code}` : `1.${code}`;
```

**ä¿®å¤åï¼š**
```javascript
const marketType = this.getMarketType(code);
const secid = `${marketType}.${code}`;
```

### 2. æ–°å¢getMarketTypeæ–¹æ³•

```javascript
static getMarketType(code) {
  // è‚¡ç¥¨ä»£ç å¸‚åœºåˆ¤æ–­è§„åˆ™ï¼š
  // 0å¼€å¤´ï¼šæ·±åœ³ä¸»æ¿ (000001, 000002ç­‰)
  // 3å¼€å¤´ï¼šåˆ›ä¸šæ¿ (300001, 300002ç­‰) 
  // 6å¼€å¤´ï¼šä¸Šæµ·ä¸»æ¿ (600000, 600036ç­‰)
  // 688å¼€å¤´ï¼šç§‘åˆ›æ¿ (688001, 688002ç­‰)
  // 8å¼€å¤´ï¼šæ–°ä¸‰æ¿ (800001, 800002ç­‰)
  
  if (code.startsWith('0') || code.startsWith('3') || code.startsWith('8')) {
    return '0'; // æ·±åœ³å¸‚åœº
  } else if (code.startsWith('6')) {
    return '1'; // ä¸Šæµ·å¸‚åœº
  } else {
    // é»˜è®¤æŒ‰ä¸Šæµ·å¸‚åœºå¤„ç†
    return '1';
  }
}
```

### 3. æ–°å¢getMarketNameæ–¹æ³•

```javascript
static getMarketName(code) {
  if (code.startsWith('000')) {
    return 'æ·±åœ³ä¸»æ¿';
  } else if (code.startsWith('002')) {
    return 'æ·±åœ³ä¸­å°æ¿';
  } else if (code.startsWith('300')) {
    return 'åˆ›ä¸šæ¿';
  } else if (code.startsWith('600') || code.startsWith('601') || code.startsWith('603') || code.startsWith('605')) {
    return 'ä¸Šæµ·ä¸»æ¿';
  } else if (code.startsWith('688')) {
    return 'ç§‘åˆ›æ¿';
  } else if (code.startsWith('8')) {
    return 'æ–°ä¸‰æ¿';
  } else {
    return 'æœªçŸ¥å¸‚åœº';
  }
}
```

## ğŸ“Š è‚¡ç¥¨ä»£ç è§„åˆ™

### æ·±åœ³å¸‚åœº (secid = 0.è‚¡ç¥¨ä»£ç )
- **000xxx**: æ·±åœ³ä¸»æ¿ (å¦‚ï¼š000001 å¹³å®‰é“¶è¡Œ)
- **002xxx**: æ·±åœ³ä¸­å°æ¿ (å¦‚ï¼š002415 æµ·åº·å¨è§†)
- **300xxx**: åˆ›ä¸šæ¿ (å¦‚ï¼š300001 ç‰¹é”å¾·)
- **8xxxxx**: æ–°ä¸‰æ¿ (å¦‚ï¼š800001)

### ä¸Šæµ·å¸‚åœº (secid = 1.è‚¡ç¥¨ä»£ç )
- **600xxx**: ä¸Šæµ·ä¸»æ¿ (å¦‚ï¼š600000 æµ¦å‘é“¶è¡Œ)
- **601xxx**: ä¸Šæµ·ä¸»æ¿ (å¦‚ï¼š601318 ä¸­å›½å¹³å®‰)
- **603xxx**: ä¸Šæµ·ä¸»æ¿ (å¦‚ï¼š603259 è¯æ˜åº·å¾·)
- **605xxx**: ä¸Šæµ·ä¸»æ¿ (å¦‚ï¼š605117 å¾·ä¸šè‚¡ä»½)
- **688xxx**: ç§‘åˆ›æ¿ (å¦‚ï¼š688001 åå…´æºåˆ›)

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹
| è‚¡ç¥¨ä»£ç  | æœŸæœ›å¸‚åœº | æœŸæœ›secid | å®é™…ç»“æœ |
|---------|---------|----------|---------|
| 000001  | æ·±åœ³ä¸»æ¿ | 0.000001 | âœ… æ­£ç¡® |
| 000002  | æ·±åœ³ä¸»æ¿ | 0.000002 | âœ… æ­£ç¡® |
| 002415  | æ·±åœ³ä¸­å°æ¿ | 0.002415 | âœ… æ­£ç¡® |
| 300001  | åˆ›ä¸šæ¿ | 0.300001 | âœ… æ­£ç¡® |
| 600000  | ä¸Šæµ·ä¸»æ¿ | 1.600000 | âœ… æ­£ç¡® |
| 600036  | ä¸Šæµ·ä¸»æ¿ | 1.600036 | âœ… æ­£ç¡® |
| 600519  | ä¸Šæµ·ä¸»æ¿ | 1.600519 | âœ… æ­£ç¡® |
| 688001  | ç§‘åˆ›æ¿ | 1.688001 | âœ… æ­£ç¡® |
| 800001  | æ–°ä¸‰æ¿ | 0.800001 | âœ… æ­£ç¡® |

### æµ‹è¯•æ–¹æ³•
1. æ‰“å¼€ `client/test/marketTest.html` åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•
2. è¿è¡Œ `client/test/marketTest.js` è¿›è¡Œç¨‹åºåŒ–æµ‹è¯•
3. åœ¨è‡ªé€‰è‚¡ç›‘æ§é¡µé¢æ·»åŠ ä¸åŒå¸‚åœºçš„è‚¡ç¥¨è¿›è¡ŒéªŒè¯

## ğŸ¯ å½±å“èŒƒå›´

### ä¿®å¤çš„æ–‡ä»¶
1. **client/services/stockService.js**
   - ä¿®å¤ `getKlineUrl` æ–¹æ³•ä¸­çš„å¸‚åœºåˆ¤æ–­
   - ä¿®å¤ `getStockInfo` æ–¹æ³•ä¸­çš„å¸‚åœºåˆ¤æ–­
   - æ–°å¢ `getMarketType` æ–¹æ³•
   - æ–°å¢ `getMarketName` æ–¹æ³•

2. **client/components/PortfolioMonitor.jsx**
   - æ·»åŠ å¸‚åœºä¿¡æ¯æ˜¾ç¤º
   - åœ¨è¡¨æ ¼ä¸­æ˜¾ç¤ºè‚¡ç¥¨æ‰€å±å¸‚åœº

### åŠŸèƒ½æ”¹è¿›
1. **APIè°ƒç”¨æ­£ç¡®æ€§**: ç¡®ä¿æ‰€æœ‰APIè°ƒç”¨éƒ½ä½¿ç”¨æ­£ç¡®çš„secidæ ¼å¼
2. **ç”¨æˆ·ä½“éªŒ**: åœ¨è‡ªé€‰è‚¡åˆ—è¡¨ä¸­æ˜¾ç¤ºè‚¡ç¥¨æ‰€å±å¸‚åœº
3. **é”™è¯¯å¤„ç†**: æ›´å¥½çš„è‚¡ç¥¨ä»£ç éªŒè¯å’Œé”™è¯¯æç¤º

## ğŸš€ ä½¿ç”¨å»ºè®®

1. **æµ‹è¯•éªŒè¯**: å»ºè®®å…ˆæµ‹è¯•å‡ åªä¸åŒå¸‚åœºçš„è‚¡ç¥¨
2. **æ•°æ®éªŒè¯**: ç¡®è®¤APIè¿”å›çš„æ•°æ®æ­£ç¡®
3. **åŠŸèƒ½æµ‹è¯•**: æµ‹è¯•è‡ªé€‰è‚¡ç›‘æ§é¡µé¢çš„å„é¡¹åŠŸèƒ½

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **è‚¡ç¥¨ä»£ç æ ¼å¼**: ç¡®ä¿è¾“å…¥çš„è‚¡ç¥¨ä»£ç æ˜¯6ä½æ•°å­—
2. **å¸‚åœºè¯†åˆ«**: ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨æ‰€å±å¸‚åœº
3. **APIå…¼å®¹æ€§**: ä¿®å¤åçš„ä»£ç ä¸ä¸œæ–¹è´¢å¯ŒAPIå®Œå…¨å…¼å®¹
4. **é”™è¯¯å¤„ç†**: å¯¹äºæ— æ³•è¯†åˆ«çš„è‚¡ç¥¨ä»£ç ï¼Œé»˜è®¤æŒ‰ä¸Šæµ·å¸‚åœºå¤„ç†

ç°åœ¨è‚¡ç¥¨å¸‚åœºåˆ¤æ–­å·²ç»ä¿®å¤ï¼Œå¯ä»¥æ­£ç¡®å¤„ç†æ‰€æœ‰æ²ªæ·±å¸‚åœºçš„è‚¡ç¥¨ä»£ç äº†ï¼
