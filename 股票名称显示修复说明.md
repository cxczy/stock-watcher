# è‚¡ç¥¨åç§°æ˜¾ç¤ºä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆï¼šæ¥å£çš„nameå­—æ®µä¼šè¿”å›è‚¡ç¥¨åç§°ä¸­æ–‡ï¼Œä½†æŒä»“è‚¡é¡µé¢çš„è‚¡ç¥¨åç§°è¡¨å¤´æ•°æ®æ²¡æœ‰å¯¹æ¥ä¸Šï¼Œæ˜¾ç¤ºçš„æ˜¯ç¡¬ç¼–ç çš„"è‚¡ç¥¨{ä»£ç }"æ ¼å¼ã€‚

## ğŸ” é—®é¢˜åˆ†æ

### 1. åŸé—®é¢˜
- **ç¡¬ç¼–ç åç§°**ï¼šæ·»åŠ è‚¡ç¥¨æ—¶ä½¿ç”¨`name: \`è‚¡ç¥¨${stockCode}\``
- **æœªè°ƒç”¨API**ï¼šæ²¡æœ‰è°ƒç”¨`StockService.getStockInfo()`è·å–çœŸå®è‚¡ç¥¨åç§°
- **æ•°æ®ä¸å‡†ç¡®**ï¼šæ˜¾ç¤ºçš„ä¸æ˜¯çœŸå®çš„è‚¡ç¥¨ä¸­æ–‡åç§°

### 2. ä¿®å¤æ–¹æ¡ˆ
- åœ¨æ·»åŠ è‚¡ç¥¨æ—¶è°ƒç”¨`StockService.getStockInfo()`è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
- ä½¿ç”¨APIè¿”å›çš„`name`å­—æ®µä½œä¸ºè‚¡ç¥¨åç§°
- æ·»åŠ é”™è¯¯å¤„ç†å’Œé™çº§æ–¹æ¡ˆ

## âœ… ä¿®å¤å†…å®¹

### 1. ä¿®å¤PortfolioHoldingsç»„ä»¶

**ä¿®å¤å‰ï¼š**
```javascript
const newStock = {
  code: stockCode,
  name: `è‚¡ç¥¨${stockCode}`, // ç¡¬ç¼–ç åç§°
  // ... å…¶ä»–å­—æ®µ
};
```

**ä¿®å¤åï¼š**
```javascript
// è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
const stockInfo = await StockService.getStockInfo(stockCode);
console.log('è‚¡ç¥¨ä¿¡æ¯:', stockInfo);

const newStock = {
  code: stockCode,
  name: stockInfo?.name || `è‚¡ç¥¨${stockCode}`, // ä½¿ç”¨APIè¿”å›çš„è‚¡ç¥¨åç§°
  // ... å…¶ä»–å­—æ®µ
};
```

### 2. å¢å¼ºStockService.getStockInfoæ–¹æ³•

**ä¿®å¤å‰ï¼š**
```javascript
static async getStockInfo(code) {
  // ç›´æ¥è¿”å›data.dataï¼Œæ²¡æœ‰å­—æ®µæ˜ å°„
  return data.data;
}
```

**ä¿®å¤åï¼š**
```javascript
static async getStockInfo(code) {
  // æ·»åŠ è¯¦ç»†æ—¥å¿—
  console.log('è‚¡ç¥¨ä¿¡æ¯APIå“åº”:', data);
  
  if (data.rc === 0 && data.data) {
    return {
      name: data.data.f58, // è‚¡ç¥¨åç§°å­—æ®µ
      code: data.data.f57, // è‚¡ç¥¨ä»£ç å­—æ®µ
      market: data.data.f60, // å¸‚åœºå­—æ®µ
      price: data.data.f2, // å½“å‰ä»·æ ¼
      change: data.data.f4, // æ¶¨è·Œå¹…
      ...data.data
    };
  } else {
    throw new Error('APIè¿”å›æ•°æ®æ ¼å¼é”™è¯¯');
  }
}
```

### 3. æ›´æ–°æˆåŠŸæ¶ˆæ¯

**ä¿®å¤å‰ï¼š**
```javascript
message.success(`å·²æ·»åŠ è‚¡ç¥¨ ${stockCode} åˆ° ${selectedGroup} åˆ†ç»„`);
```

**ä¿®å¤åï¼š**
```javascript
message.success(`å·²æ·»åŠ è‚¡ç¥¨ ${stockInfo?.name || stockCode} åˆ° ${selectedGroup} åˆ†ç»„`);
```

## ğŸ¯ ä¿®å¤æ•ˆæœ

### 1. è‚¡ç¥¨åç§°æ˜¾ç¤ºæ­£ç¡®
- **ä¿®å¤å‰**ï¼šæ˜¾ç¤º"è‚¡ç¥¨000001"
- **ä¿®å¤å**ï¼šæ˜¾ç¤º"å¹³å®‰é“¶è¡Œ"ï¼ˆçœŸå®è‚¡ç¥¨åç§°ï¼‰

### 2. æ•°æ®è·å–å®Œæ•´
- è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€ä»£ç ã€å¸‚åœºã€ä»·æ ¼ã€æ¶¨è·Œå¹…ï¼‰
- æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—
- æä¾›é”™è¯¯å¤„ç†å’Œé™çº§æ–¹æ¡ˆ

### 3. ç”¨æˆ·ä½“éªŒæå‡
- æˆåŠŸæ¶ˆæ¯æ˜¾ç¤ºçœŸå®è‚¡ç¥¨åç§°
- è¡¨æ ¼ä¸­æ˜¾ç¤ºä¸­æ–‡è‚¡ç¥¨åç§°
- æä¾›æ›´å¥½çš„æ•°æ®å¯è§†åŒ–

## ğŸ“Š APIå­—æ®µæ˜ å°„

| å­—æ®µ | APIå­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|---------|------|------|
| è‚¡ç¥¨åç§° | f58 | è‚¡ç¥¨ä¸­æ–‡åç§° | "å¹³å®‰é“¶è¡Œ" |
| è‚¡ç¥¨ä»£ç  | f57 | è‚¡ç¥¨ä»£ç  | "000001" |
| å¸‚åœº | f60 | æ‰€å±å¸‚åœº | "æ·±åœ³ä¸»æ¿" |
| å½“å‰ä»·æ ¼ | f2 | æœ€æ–°ä»·æ ¼ | 12.50 |
| æ¶¨è·Œå¹… | f4 | æ¶¨è·Œç™¾åˆ†æ¯” | 2.5 |

## ğŸ”§ æµ‹è¯•æ–¹æ³•

### 1. ä½¿ç”¨æµ‹è¯•é¡µé¢
è®¿é—® `http://localhost:3000/test/stockNameTest.html` è¿›è¡Œæµ‹è¯•ï¼š
- è¾“å…¥è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ï¼š000001ï¼‰
- ç‚¹å‡»"è·å–è‚¡ç¥¨ä¿¡æ¯"
- æŸ¥çœ‹è¿”å›çš„è‚¡ç¥¨åç§°

### 2. åœ¨æŒä»“è‚¡é¡µé¢æµ‹è¯•
1. è¿›å…¥"æŒä»“è‚¡ç®¡ç†"é¡µé¢
2. é€‰æ‹©ä»»æ„åˆ†ç»„
3. è¾“å…¥è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ï¼š000001ï¼‰
4. ç‚¹å‡»"æ·»åŠ è‚¡ç¥¨"
5. æŸ¥çœ‹è¡¨æ ¼ä¸­æ˜¾ç¤ºçš„è‚¡ç¥¨åç§°

### 3. æ§åˆ¶å°éªŒè¯
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼š
```
è‚¡ç¥¨ä¿¡æ¯APIå“åº”: {rc: 0, data: {...}}
è‚¡ç¥¨ä¿¡æ¯: {name: "å¹³å®‰é“¶è¡Œ", code: "000001", ...}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. APIä¾èµ–
- ä¾èµ–ä¸œæ–¹è´¢å¯ŒAPIçš„ç¨³å®šæ€§
- éœ€è¦ç½‘ç»œè¿æ¥æ­£å¸¸
- å¯èƒ½å­˜åœ¨APIé™æµ

### 2. é”™è¯¯å¤„ç†
- å¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼Œä¼šé™çº§ä½¿ç”¨"è‚¡ç¥¨{ä»£ç }"æ ¼å¼
- æ·»åŠ äº†è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- æä¾›äº†ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

### 3. æ€§èƒ½è€ƒè™‘
- æ¯æ¬¡æ·»åŠ è‚¡ç¥¨éƒ½ä¼šè°ƒç”¨API
- å¯ä»¥è€ƒè™‘æ·»åŠ ç¼“å­˜æœºåˆ¶
- æ‰¹é‡æ·»åŠ æ—¶éœ€è¦æ³¨æ„APIé™æµ

## ğŸš€ åç»­ä¼˜åŒ–

### 1. æ•°æ®ç¼“å­˜
```javascript
// å¯ä»¥è€ƒè™‘æ·»åŠ æœ¬åœ°ç¼“å­˜
const stockInfoCache = new Map();
```

### 2. æ‰¹é‡è·å–
```javascript
// æ”¯æŒæ‰¹é‡è·å–è‚¡ç¥¨ä¿¡æ¯
static async getMultipleStockInfo(codes) {
  // æ‰¹é‡APIè°ƒç”¨
}
```

### 3. å®æ—¶æ›´æ–°
```javascript
// å®šæœŸæ›´æ–°è‚¡ç¥¨ä¿¡æ¯
setInterval(() => {
  // æ›´æ–°è‚¡ç¥¨ä»·æ ¼å’Œæ¶¨è·Œå¹…
}, 60000);
```

### 4. æ•°æ®éªŒè¯
```javascript
// éªŒè¯è‚¡ç¥¨ä»£ç æ ¼å¼
static validateStockCode(code) {
  return /^[0-9]{6}$/.test(code);
}
```

ç°åœ¨è‚¡ç¥¨åç§°ä¼šæ­£ç¡®æ˜¾ç¤ºä¸ºä¸­æ–‡åç§°ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç çš„"è‚¡ç¥¨{ä»£ç }"æ ¼å¼ï¼
