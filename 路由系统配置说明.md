# 路由系统配置说明

## 🚀 新增路由系统

### 1. 安装依赖
```bash
pnpm add react-router-dom
```

### 2. 路由结构

```
client/
├── router/
│   └── index.jsx          # 路由配置
├── components/
│   ├── Layout.jsx         # 布局组件
│   ├── PoolScreener.jsx    # 池子筛选页面
│   ├── TechnicalScreener.jsx # 技术分析选股页面
│   ├── PortfolioMonitor.jsx # 自选股监控页面
│   ├── PortfolioHoldings.jsx # 持仓股管理页面
│   └── BacktestAnalysis.jsx # 回归分析页面
└── base.jsx               # 应用入口
```

### 3. 路由配置

#### 路由路径映射
| 路径 | 组件 | 说明 |
|------|------|------|
| `/` | PoolScreener | 池子筛选（首页） |
| `/technical-screener` | TechnicalScreener | 技术分析选股 |
| `/portfolio-monitor` | PortfolioMonitor | 自选股监控 |
| `/portfolio-holdings` | PortfolioHoldings | 持仓股管理 |
| `/backtest-analysis` | BacktestAnalysis | 回归分析 |

#### 布局组件
- **侧边栏导航**：显示所有功能模块
- **顶部标题**：显示当前页面名称
- **内容区域**：使用`<Outlet />`渲染子路由

### 4. 移除的组件

#### 已删除
- `client/components/SingleStockTest.jsx` - 单股票测试页面

#### 原因
- 功能重复：单股票测试功能已整合到其他页面
- 简化结构：减少不必要的组件
- 路由优化：通过路由系统更好地组织功能

### 5. 功能重新分配

#### 原StockAnalysis组件功能分配
| 原功能 | 新位置 | 说明 |
|--------|--------|------|
| 池子筛选 | PoolScreener | 独立的池子筛选页面 |
| 技术分析选股 | TechnicalScreener | 保持原有功能 |
| 自选股监控 | PortfolioMonitor | 保持原有功能 |
| 持仓股管理 | PortfolioHoldings | 保持原有功能 |
| 回归分析 | BacktestAnalysis | 独立的回测分析页面 |
| 单股票测试 | 已移除 | 功能整合到其他页面 |

### 6. 导航菜单

#### 菜单项配置
```javascript
const menuItems = [
  {
    key: '/',
    icon: <DatabaseOutlined />,
    label: '池子筛选',
  },
  {
    key: '/technical-screener',
    icon: <SearchOutlined />,
    label: '技术分析选股',
  },
  {
    key: '/portfolio-monitor',
    icon: <MonitorOutlined />,
    label: '自选股监控',
  },
  {
    key: '/portfolio-holdings',
    icon: <FolderOutlined />,
    label: '持仓股管理',
  },
  {
    key: '/backtest-analysis',
    icon: <BarChartOutlined />,
    label: '回归分析',
  },
];
```

### 7. 认证集成

#### 路由保护
```javascript
export default function AppRouter() {
  const token = useAtomValue(tokenAtom);
  
  if (!token) {
    return <Auth />;
  }
  
  return <RouterProvider router={router} />;
}
```

- 未登录用户：显示登录页面
- 已登录用户：显示路由系统

### 8. 样式优化

#### 布局样式
- **侧边栏**：200px宽度，白色背景
- **顶部栏**：64px高度，白色背景，底部边框
- **内容区**：自适应高度，浅灰色背景
- **响应式**：支持不同屏幕尺寸

#### 导航样式
- **选中状态**：高亮显示当前页面
- **图标**：使用Ant Design图标
- **悬停效果**：鼠标悬停时的视觉反馈

### 9. 使用说明

#### 访问方式
1. **直接访问**：在浏览器地址栏输入完整路径
2. **导航点击**：点击侧边栏菜单项
3. **程序跳转**：使用`useNavigate`钩子

#### 示例代码
```javascript
import { useNavigate } from 'react-router-dom';

function MyComponent() {
  const navigate = useNavigate();
  
  const handleClick = () => {
    navigate('/technical-screener');
  };
  
  return <Button onClick={handleClick}>跳转到技术分析</Button>;
}
```

### 10. 优势

#### 用户体验
- **清晰导航**：侧边栏显示所有功能
- **状态保持**：页面切换时保持状态
- **URL友好**：支持书签和直接访问

#### 开发体验
- **模块化**：每个功能独立组件
- **可维护**：清晰的代码结构
- **可扩展**：易于添加新功能

#### 性能优化
- **懒加载**：按需加载组件
- **状态管理**：使用Jotai进行状态管理
- **缓存优化**：路由级别的缓存

### 11. 后续优化

#### 计划功能
1. **面包屑导航**：显示当前页面路径
2. **页面缓存**：保持页面状态
3. **权限控制**：基于角色的页面访问
4. **国际化**：多语言支持
5. **主题切换**：深色/浅色主题

#### 技术优化
1. **代码分割**：动态导入组件
2. **预加载**：预加载常用页面
3. **错误边界**：页面级错误处理
4. **性能监控**：页面加载性能监控

现在系统使用现代化的路由架构，提供更好的用户体验和开发体验！
