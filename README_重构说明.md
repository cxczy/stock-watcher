# Vue到React重构项目

## 项目概述

这是一个将Vue.js金融数据分析系统重构为React的项目。主要功能包括：
- 股票池筛选
- 技术指标分析
- 回测策略
- 数据可视化

## 技术栈

- **前端框架**: React 19.1.1
- **构建工具**: Vite 7.1.7
- **UI组件库**: Ant Design 5.27.4
- **状态管理**: Jotai 2.14.0
- **样式**: Tailwind CSS 4.1.13
- **包管理**: pnpm

## 项目结构

```
client/
├── atoms/                 # Jotai状态管理
│   └── stockAtoms.js
├── components/            # React组件
│   ├── StockAnalysis.jsx # 主分析页面
│   └── StockChart.jsx    # K线图组件
├── data/                 # 数据文件
│   └── stockPools.js     # 股票池数据
├── services/             # 服务层
│   └── stockService.js   # 股票数据服务
├── strategies/           # 回测策略
│   ├── BaseStrategy.js
│   ├── ContinuousDownStrategy.js
│   └── VolumeRatioStrategy.js
├── utils/               # 工具类
│   ├── dataUtils.js     # 数据处理工具
│   └── indicators.js    # 技术指标计算
└── auth/                # 认证相关
    ├── authAtom.js
    └── index.jsx
```

## 核心功能

### 1. 股票数据获取
- 支持从东方财富API获取K线数据
- 自动处理不同市场代码（深市/沪市）
- 数据解析和格式化

### 2. 技术指标计算
- 简单移动平均线（SMA）
- 指数移动平均线（EMA）
- 成交量比率
- 连续下跌/上涨天数
- RSI指标
- MACD指标

### 3. 回测策略
- **连续下跌策略**: 基于连续下跌天数进行买卖决策
- **成交量比率策略**: 基于成交量比率进行买卖决策
- 支持策略参数配置
- 实时回测结果统计

### 4. 数据可视化
- K线图显示
- 买卖点标记
- 回测统计信息
- 数据表格展示

## 使用方法

### 1. 安装依赖
```bash
pnpm install
```

### 2. 启动开发服务器
```bash
pnpm dev
```

### 3. 访问应用
打开浏览器访问 `http://localhost:3000`

### 4. 使用步骤
1. **登录**: 使用任意用户名密码登录（演示用）
2. **选择股票池**: 从下拉菜单选择股票池
3. **选择股票**: 选择具体的股票代码
4. **获取数据**: 点击"查询历史"获取K线数据
5. **配置策略**: 选择回测策略和参数
6. **执行回测**: 点击"执行回测"查看结果
7. **查看结果**: 在K线图和表格中查看回测结果

## 主要特性

### 1. 响应式设计
- 使用Tailwind CSS实现响应式布局
- 适配不同屏幕尺寸

### 2. 状态管理
- 使用Jotai进行轻量级状态管理
- 原子化状态设计，便于维护

### 3. 组件化架构
- 高度模块化的组件设计
- 可复用的业务组件

### 4. 错误处理
- 完善的错误边界处理
- 用户友好的错误提示

## 与原Vue项目的对比

| 功能 | Vue版本 | React版本 |
|------|---------|-----------|
| 状态管理 | Vuex | Jotai |
| 组件通信 | props/emit | props + atoms |
| 生命周期 | mounted/updated | useEffect |
| 响应式 | reactive | useState/useAtom |
| UI框架 | Element UI | Ant Design |

## 开发说明

### 添加新的回测策略
1. 在 `strategies/` 目录下创建新的策略文件
2. 继承 `BaseStrategy` 类
3. 实现 `execute` 方法
4. 在 `StockAnalysis.jsx` 中添加策略选项

### 添加新的技术指标
1. 在 `utils/indicators.js` 中添加指标计算方法
2. 在策略中使用新的指标

### 自定义股票池
1. 在 `data/stockPools.js` 中添加新的股票池
2. 更新 `STOCK_POOLS` 对象

## 注意事项

1. **API限制**: 东方财富API可能有访问频率限制
2. **数据准确性**: 请以官方数据为准
3. **回测结果**: 历史回测结果不代表未来表现
4. **浏览器兼容**: 建议使用现代浏览器

## 后续优化建议

1. **性能优化**: 添加虚拟滚动、数据缓存等
2. **功能扩展**: 添加更多技术指标和策略
3. **数据源**: 集成更多数据源
4. **可视化**: 使用专业图表库（如ECharts）
5. **测试**: 添加单元测试和集成测试
